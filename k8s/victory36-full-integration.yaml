apiVersion: v1
kind: ConfigMap
metadata:
  name: victory36-full-integration-config
  namespace: victory36
  labels:
    app: victory36-cybersecurity-simulation
    component: integration-controller
    version: v2.0.0
    security-classification: diamond-sao
data:
  # Claude 4 Global Configuration (Direct Anthropic API)
  claude4-enabled: "true"
  claude4-model-primary: "claude-3-5-sonnet-20241022"
  claude4-model-fallback: "claude-3-opus-20240229"
  claude4-api-endpoint: "https://api.anthropic.com/v1/messages"
  claude4-max-tokens: "8192"
  claude4-temperature: "0.7"
  claude4-streaming: "true"
  
  # Vertex AI Deprecation
  vertex-ai-deprecated: "true"
  vertex-ai-migration-complete: "true"
  
  # Dr Lucy Flight Memory System Integration
  dr-lucy-service-url: "https://dr-lucy-predictions-859242575175.us-west1.run.app"
  dr-lucy-internal-service: "http://victory36-dr-lucy-service.victory36.svc.cluster.local:8080"
  dr-lucy-time-presser-enabled: "true"
  dr-lucy-memory-retention-hours: "72"
  
  # Dream Commander Strategic System Integration  
  dream-commander-service-url: "https://dream-commander-predictions-859242575175.us-west1.run.app"
  dream-commander-internal-service: "http://victory36-dream-commander-service.victory36.svc.cluster.local:8080"
  dream-commander-time-liner-enabled: "true"
  dream-commander-strategic-horizon-days: "90"
  
  # Prediction Pipeline Controller Integration
  prediction-pipeline-service: "http://victory36-prediction-pipeline-service.victory36.svc.cluster.local:8080"
  pipeline-coordination-enabled: "true"
  pipeline-temporal-coherence-threshold: "0.85"
  pipeline-max-concurrent-predictions: "50"
  pipeline-cache-ttl-seconds: "300"
  pipeline-timeout-seconds: "45"
  
  # Time Presser Anti-Gravity Integration
  time-presser-service: "http://victory36-time-presser-service.victory36.svc.cluster.local:8080"
  time-presser-acceleration-factor: "10.0"
  time-presser-simulator-enabled: "true"
  time-presser-quantum-coherence: "0.95"
  
  # MoCoSWarm MCP Integration (Legacy Support)
  mocoswarm-mcp-enabled: "false"
  mocoswarm-legacy-bridge: "true"
  
  # Security and Monitoring
  diamond-sao-security-level: "maximum"
  monitoring-enabled: "true"
  telemetry-export-enabled: "true"
  audit-logging-enabled: "true"
  
  # Anti-Gravity Power Craft Coordination
  anti-gravity-craft-enabled: "true"
  temporal-manipulation-authorized: "true"
  space-time-coherence-monitoring: "true"
  quantum-entanglement-stability: "0.98"
  
  # Failover and Resilience
  claude4-fallback-enabled: "true"
  service-mesh-enabled: "true"
  circuit-breaker-enabled: "true"
  retry-attempts: "3"
  backoff-multiplier: "2.0"

---
apiVersion: v1
kind: Secret
metadata:
  name: victory36-claude4-integration-credentials
  namespace: victory36
  labels:
    app: victory36-cybersecurity-simulation
    component: claude4-integration
    security-classification: diamond-sao
type: Opaque
data:
  # Base64 encoded credentials (to be populated by deployment)
  claude4-api-key: ""
  anthropic-api-key: ""
  diamond-sao-master-key: ""
  temporal-coordination-token: ""
  anti-gravity-authorization-key: ""

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: victory36-integration-coordinator
  namespace: victory36
  labels:
    app: victory36-cybersecurity-simulation
    component: integration-coordinator
    version: v2.0.0
    security-classification: diamond-sao
spec:
  replicas: 2
  selector:
    matchLabels:
      app: victory36-cybersecurity-simulation
      component: integration-coordinator
  template:
    metadata:
      labels:
        app: victory36-cybersecurity-simulation
        component: integration-coordinator
        version: v2.0.0
        security-classification: diamond-sao
    spec:
      serviceAccountName: victory36-service-account
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 2000
      containers:
      - name: integration-coordinator
        image: gcr.io/api-for-warp-drive/victory36-integration-coordinator:latest
        imagePullPolicy: Always
        ports:
        - containerPort: 8080
          name: http
          protocol: TCP
        - containerPort: 9092
          name: coordinator-api
          protocol: TCP
        env:
        # Claude 4 Configuration
        - name: CLAUDE4_ENABLED
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: claude4-enabled
        - name: CLAUDE4_MODEL_PRIMARY
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: claude4-model-primary
        - name: CLAUDE4_API_ENDPOINT
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: claude4-api-endpoint
        - name: CLAUDE4_API_KEY
          valueFrom:
            secretKeyRef:
              name: victory36-claude4-integration-credentials
              key: claude4-api-key
              
        # Service Integration
        - name: DR_LUCY_SERVICE_URL
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: dr-lucy-service-url
        - name: DREAM_COMMANDER_SERVICE_URL
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: dream-commander-service-url
        - name: PREDICTION_PIPELINE_SERVICE
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: prediction-pipeline-service
        - name: TIME_PRESSER_SERVICE
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: time-presser-service
              
        # Anti-Gravity Power Craft
        - name: ANTI_GRAVITY_CRAFT_ENABLED
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: anti-gravity-craft-enabled
        - name: TEMPORAL_MANIPULATION_AUTHORIZED
          valueFrom:
            configMapKeyRef:
              name: victory36-full-integration-config
              key: temporal-manipulation-authorized
        - name: ANTI_GRAVITY_AUTHORIZATION_KEY
          valueFrom:
            secretKeyRef:
              name: victory36-claude4-integration-credentials
              key: anti-gravity-authorization-key
              
        # Security
        - name: DIAMOND_SAO_MASTER_KEY
          valueFrom:
            secretKeyRef:
              name: victory36-claude4-integration-credentials
              key: diamond-sao-master-key
        
        resources:
          requests:
            memory: "1Gi"
            cpu: "500m"
          limits:
            memory: "4Gi"
            cpu: "2000m"
        
        livenessProbe:
          httpGet:
            path: /health/integration
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 15
        
        readinessProbe:
          httpGet:
            path: /ready/integration
            port: 8080
          initialDelaySeconds: 15
          periodSeconds: 5
        
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          capabilities:
            drop:
            - ALL
      
      nodeSelector:
        kubernetes.io/arch: amd64
      
      tolerations:
      - key: "victory36.io/integration"
        operator: "Equal"
        value: "true"
        effect: "NoSchedule"

---
apiVersion: v1
kind: Service
metadata:
  name: victory36-integration-coordinator-service
  namespace: victory36
  labels:
    app: victory36-cybersecurity-simulation
    component: integration-coordinator-service
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
    protocol: TCP
    name: http
  - port: 9092
    targetPort: 9092
    protocol: TCP
    name: coordinator-api
  selector:
    app: victory36-cybersecurity-simulation
    component: integration-coordinator

---
# Network Policy for secure inter-service communication
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: victory36-integration-network-policy
  namespace: victory36
spec:
  podSelector:
    matchLabels:
      app: victory36-cybersecurity-simulation
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: victory36
    - podSelector:
        matchLabels:
          app: victory36-cybersecurity-simulation
    ports:
    - protocol: TCP
      port: 8080
    - protocol: TCP
      port: 9090
    - protocol: TCP
      port: 9091
    - protocol: TCP
      port: 9092
  egress:
  - to: []
    ports:
    - protocol: TCP
      port: 53
    - protocol: UDP
      port: 53
    - protocol: TCP
      port: 443
    - protocol: TCP
      port: 80
    - protocol: TCP
      port: 8080
    - protocol: TCP
      port: 9090
    - protocol: TCP
      port: 9091
    - protocol: TCP
      port: 9092

---
# Service Monitor for Prometheus integration
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: victory36-integration-monitor
  namespace: victory36
  labels:
    app: victory36-cybersecurity-simulation
    component: monitoring
spec:
  selector:
    matchLabels:
      app: victory36-cybersecurity-simulation
  endpoints:
  - port: http
    path: /metrics
    interval: 15s
    honorLabels: true
